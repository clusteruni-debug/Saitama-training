<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#ffc107" />
    <meta name="description" content="원펀맨 감성 프로그레시브 오버로드 홈트레이닝" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" type="image/svg+xml" href="/icon-192.svg" />
    <link rel="apple-touch-icon" href="/icon-192.svg" />
    <title>Saitama Training</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js').then((reg) => {
            // 주기적으로 업데이트 확인 (1시간)
            setInterval(() => reg.update(), 60 * 60 * 1000)
          })
        })
        // SW 업데이트 알림 수신
        navigator.serviceWorker.addEventListener('message', (e) => {
          if (e.data && e.data.type === 'SW_UPDATED') {
            const bar = document.createElement('div')
            bar.style.cssText = 'position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:#ffc107;color:#000;padding:10px 20px;border-radius:12px;font-size:13px;font-weight:600;z-index:9999;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.3)'
            bar.textContent = '새 버전이 있습니다. 탭하여 업데이트'
            bar.onclick = () => location.reload()
            document.body.appendChild(bar)
            setTimeout(() => bar.remove(), 15000)
          }
        })
      }
    </script>
  </body>
</html>
